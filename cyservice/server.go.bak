
package cyservice

type cyserviceServer struct {}

func (s *cyserviceServer) RouteChat(stream CyService_StreamFragmentsServer) error {
	for {
		frag, err := stream.Recv()
		if err == io.EOF {
			return nil
		}
		if err != nil {
			return err
		}
		if err := stream.Send(frag); err != nil {
				return err
		}
	}
}

func StartServer() {
  address = "0.0.0.0:8080"
  lis, err := net.Listen("tcp", address)
  if err != nil {
    log.Fatal("Failed to listen: %v", err)
  }
  grpcServer := grpc.NewServer()
  RegisterCyServiceServer(grpcServer, &cyserviceServer{})
  grpcServer.Serve(lis)
}
